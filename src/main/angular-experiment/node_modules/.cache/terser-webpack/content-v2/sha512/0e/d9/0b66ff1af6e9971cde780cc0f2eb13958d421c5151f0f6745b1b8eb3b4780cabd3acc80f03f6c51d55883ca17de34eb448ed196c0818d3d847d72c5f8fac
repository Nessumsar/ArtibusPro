{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{oogQ:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"amplify_select_mfa_type\",(function(){return AmplifySelectMFAType}));var _index_6200044a_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(\"BZ0O\"),_aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(\"Nt7R\"),_aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(\"JIIv\"),_auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(\"s1tr\"),_Translations_6bb65e0f_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(\"CHJ9\"),_constants_2b619cf3_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(\"aut5\"),_aws_amplify_auth__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(\"v4IS\");const logger=new _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__.a(\"SelectMFAType\"),AmplifySelectMFAType=class{constructor(hostRef){Object(_index_6200044a_js__WEBPACK_IMPORTED_MODULE_0__.g)(this,hostRef),this.handleSubmit=event=>this.verify(event),this.TOTPSetup=!1,this.selectMessage=null,this.MFAMethod=null,this.isTOTP=!1,this.isNoMFA=!1,this.isSMS=!1,this.loading=!1}handleRadioButtonChange(event){this.TOTPSetup=!1,this.selectMessage=null,this.isNoMFA=!1,this.isTOTP=!1,this.isSMS=!1;const{value:value,type:type,checked:checked}=event.target,checkType=[\"radio\",\"checkbox\"].includes(type);value===_auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_3__.c.SMS&&checkType&&(this.isSMS=checked),value===_auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_3__.c.TOTP&&checkType&&(this.isTOTP=checked),value===_auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_3__.c.NOMFA&&checkType&&(this.isNoMFA=checked)}async verify(event){event&&event.preventDefault(),logger.debug(\"MFA Type Values\",{TOTP:this.isTOTP,SMS:this.isSMS,\"No MFA\":this.isNoMFA}),this.isTOTP?this.MFAMethod=_auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_3__.c.TOTP:this.isSMS?this.MFAMethod=_auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_3__.c.SMS:this.isNoMFA&&(this.MFAMethod=_auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_3__.c.NOMFA);const user=this.authData;if(!_aws_amplify_auth__WEBPACK_IMPORTED_MODULE_6__.a||\"function\"!=typeof _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_6__.a.setPreferredMFA)throw new Error(_constants_2b619cf3_js__WEBPACK_IMPORTED_MODULE_5__.d);this.loading=!0;try{const preferredMFAData=await _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_6__.a.setPreferredMFA(user,this.MFAMethod);logger.debug(\"Set Preferred MFA Succeeded\",preferredMFAData),this.selectMessage=`${_aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__.a.get(_Translations_6bb65e0f_js__WEBPACK_IMPORTED_MODULE_4__.a.SUCCESS_MFA_TYPE)} ${this.MFAMethod}`}catch(error){const{message:message}=error;message===_constants_2b619cf3_js__WEBPACK_IMPORTED_MODULE_5__.l||message===_constants_2b619cf3_js__WEBPACK_IMPORTED_MODULE_5__.m?(this.TOTPSetup=!0,this.selectMessage=_aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__.a.get(_Translations_6bb65e0f_js__WEBPACK_IMPORTED_MODULE_4__.a.SETUP_TOTP_REQUIRED)):(logger.debug(\"Set Preferred MFA failed\",error),this.selectMessage=_aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__.a.get(_Translations_6bb65e0f_js__WEBPACK_IMPORTED_MODULE_4__.a.UNABLE_TO_SETUP_MFA_AT_THIS_TIME))}finally{this.loading=!1}}contentBuilder(){if(!this.MFATypes||Object.keys(this.MFATypes).length<2)return logger.debug(_aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__.a.get(_Translations_6bb65e0f_js__WEBPACK_IMPORTED_MODULE_4__.a.LESS_THAN_TWO_MFA_VALUES_MESSAGE)),Object(_index_6200044a_js__WEBPACK_IMPORTED_MODULE_0__.f)(\"div\",null,Object(_index_6200044a_js__WEBPACK_IMPORTED_MODULE_0__.f)(\"a\",null,_aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__.a.get(_Translations_6bb65e0f_js__WEBPACK_IMPORTED_MODULE_4__.a.LESS_THAN_TWO_MFA_VALUES_MESSAGE)));const{SMS:SMS,TOTP:TOTP,Optional:Optional}=this.MFATypes;return Object(_index_6200044a_js__WEBPACK_IMPORTED_MODULE_0__.f)(\"amplify-form-section\",{submitButtonText:_aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__.a.get(_Translations_6bb65e0f_js__WEBPACK_IMPORTED_MODULE_4__.a.SELECT_MFA_TYPE_SUBMIT_BUTTON_TEXT),headerText:_aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__.a.get(_Translations_6bb65e0f_js__WEBPACK_IMPORTED_MODULE_4__.a.SELECT_MFA_TYPE_HEADER_TEXT),handleSubmit:event=>this.handleSubmit(event),loading:this.loading},SMS?Object(_index_6200044a_js__WEBPACK_IMPORTED_MODULE_0__.f)(\"amplify-radio-button\",{key:\"sms\",name:\"MFAType\",value:\"SMS\",label:\"SMS\",handleInputChange:event=>this.handleRadioButtonChange(event)}):null,TOTP?Object(_index_6200044a_js__WEBPACK_IMPORTED_MODULE_0__.f)(\"amplify-radio-button\",{key:\"totp\",name:\"MFAType\",value:\"TOTP\",label:\"TOTP\",handleInputChange:event=>this.handleRadioButtonChange(event)}):null,Optional?Object(_index_6200044a_js__WEBPACK_IMPORTED_MODULE_0__.f)(\"amplify-radio-button\",{key:\"noMFA\",name:\"MFAType\",value:\"NOMFA\",label:\"No MFA\",handleInputChange:event=>this.handleRadioButtonChange(event)}):null)}render(){return Object(_index_6200044a_js__WEBPACK_IMPORTED_MODULE_0__.f)(\"div\",null,this.contentBuilder(),this.TOTPSetup?Object(_index_6200044a_js__WEBPACK_IMPORTED_MODULE_0__.f)(\"amplify-totp-setup\",{user:this.authData}):null)}}}}]);","extractedComments":[]}