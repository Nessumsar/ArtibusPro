{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{HaBs:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"amplify_authenticator\",(function(){return AmplifyAuthenticator}));var _index_6200044a_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(\"BZ0O\"),_aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(\"Nt7R\"),_aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(\"Qycn\"),_auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(\"s1tr\"),_constants_2b619cf3_js__WEBPACK_IMPORTED_MODULE_5__=(__webpack_require__(\"CHJ9\"),__webpack_require__(\"aut5\")),_helpers_bbc44569_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(\"JmXW\"),_aws_amplify_auth__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(\"TESy\"),_aws_amplify_auth__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(\"v4IS\");const logger=new _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__.a(\"Authenticator\"),AmplifyAuthenticator=class{constructor(hostRef){Object(_index_6200044a_js__WEBPACK_IMPORTED_MODULE_0__.g)(this,hostRef),this.initialAuthState=_auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_3__.a.SignIn,this.authState=_auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_3__.a.Loading,this.toastMessage=\"\",this.onAuthStateChange=(nextAuthState,data)=>{if(void 0===nextAuthState)return logger.error(\"nextAuthState cannot be undefined\");logger.info(\"Inside onAuthStateChange Method current authState:\",this.authState),this.authState=nextAuthState===_auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_3__.a.SignedOut?this.initialAuthState:nextAuthState,void 0!==data&&(this.authData=data,logger.log(\"Auth Data was set:\",this.authData)),logger.info(`authState has been updated to ${this.authState}`)}}async componentWillLoad(){_aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__.a.listen(_constants_2b619cf3_js__WEBPACK_IMPORTED_MODULE_5__.j,({payload:{event:event,data:data}})=>{switch(event){case\"cognitoHostedUI\":return this.onAuthStateChange(_auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_3__.a.SignedIn,data);case\"cognitoHostedUI_failure\":case\"parsingUrl_failure\":case\"signOut\":case\"customGreetingSignOut\":return this.onAuthStateChange(_auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_3__.a.SignIn,null)}}),_aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__.a.listen(_constants_2b619cf3_js__WEBPACK_IMPORTED_MODULE_5__.i,data=>{const{payload:payload}=data;switch(payload.event){case _constants_2b619cf3_js__WEBPACK_IMPORTED_MODULE_5__.h:payload.message&&(this.toastMessage=payload.message);break;case _constants_2b619cf3_js__WEBPACK_IMPORTED_MODULE_5__.a:payload.message&&(this.onAuthStateChange(payload.message,payload.data),this.toastMessage=\"\");break;default:logger.warn(\"Unhandled Auth Event\",payload.event)}}),Object(_aws_amplify_auth__WEBPACK_IMPORTED_MODULE_7__.j)(\"amplify-authenticator\");const byHostedUI=localStorage.getItem(_constants_2b619cf3_js__WEBPACK_IMPORTED_MODULE_5__.f);localStorage.removeItem(_constants_2b619cf3_js__WEBPACK_IMPORTED_MODULE_5__.f),\"true\"!==byHostedUI&&await this.checkUser()}async checkUser(){if(!_aws_amplify_auth__WEBPACK_IMPORTED_MODULE_8__.a||\"function\"!=typeof _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_8__.a.currentAuthenticatedUser)throw new Error(_constants_2b619cf3_js__WEBPACK_IMPORTED_MODULE_5__.d);try{const user=await _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_8__.a.currentAuthenticatedUser();Object(_helpers_bbc44569_js__WEBPACK_IMPORTED_MODULE_6__.d)(_auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_3__.a.SignedIn,user)}catch(error){let cachedAuthState=null;try{cachedAuthState=localStorage.getItem(_constants_2b619cf3_js__WEBPACK_IMPORTED_MODULE_5__.k)}catch(error){logger.debug(\"Failed to get the auth state from local storage\",error)}try{cachedAuthState===_auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_3__.a.SignedIn&&await _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_8__.a.signOut(),Object(_helpers_bbc44569_js__WEBPACK_IMPORTED_MODULE_6__.d)(this.initialAuthState)}catch(error){logger.debug(\"Failed to sign out\",error)}}}renderAuthComponent(authState){switch(authState){case _auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_3__.a.SignIn:return Object(_index_6200044a_js__WEBPACK_IMPORTED_MODULE_0__.f)(\"slot\",{name:\"sign-in\"},Object(_index_6200044a_js__WEBPACK_IMPORTED_MODULE_0__.f)(\"amplify-sign-in\",{federated:this.federated,usernameAlias:this.usernameAlias}));case _auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_3__.a.ConfirmSignIn:return Object(_index_6200044a_js__WEBPACK_IMPORTED_MODULE_0__.f)(\"slot\",{name:\"confirm-sign-in\"},Object(_index_6200044a_js__WEBPACK_IMPORTED_MODULE_0__.f)(\"amplify-confirm-sign-in\",{user:this.authData}));case _auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_3__.a.SignUp:return Object(_index_6200044a_js__WEBPACK_IMPORTED_MODULE_0__.f)(\"slot\",{name:\"sign-up\"},Object(_index_6200044a_js__WEBPACK_IMPORTED_MODULE_0__.f)(\"amplify-sign-up\",{usernameAlias:this.usernameAlias}));case _auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_3__.a.ConfirmSignUp:return Object(_index_6200044a_js__WEBPACK_IMPORTED_MODULE_0__.f)(\"slot\",{name:\"confirm-sign-up\"},Object(_index_6200044a_js__WEBPACK_IMPORTED_MODULE_0__.f)(\"amplify-confirm-sign-up\",{user:this.authData,usernameAlias:this.usernameAlias}));case _auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_3__.a.ForgotPassword:return Object(_index_6200044a_js__WEBPACK_IMPORTED_MODULE_0__.f)(\"slot\",{name:\"forgot-password\"},Object(_index_6200044a_js__WEBPACK_IMPORTED_MODULE_0__.f)(\"amplify-forgot-password\",{usernameAlias:this.usernameAlias}));case _auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_3__.a.ResetPassword:return Object(_index_6200044a_js__WEBPACK_IMPORTED_MODULE_0__.f)(\"slot\",{name:\"require-new-password\"},Object(_index_6200044a_js__WEBPACK_IMPORTED_MODULE_0__.f)(\"amplify-require-new-password\",{user:this.authData}));case _auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_3__.a.VerifyContact:return Object(_index_6200044a_js__WEBPACK_IMPORTED_MODULE_0__.f)(\"slot\",{name:\"verify-contact\"},Object(_index_6200044a_js__WEBPACK_IMPORTED_MODULE_0__.f)(\"amplify-verify-contact\",{user:this.authData}));case _auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_3__.a.TOTPSetup:return Object(_index_6200044a_js__WEBPACK_IMPORTED_MODULE_0__.f)(\"slot\",{name:\"totp-setup\"},Object(_index_6200044a_js__WEBPACK_IMPORTED_MODULE_0__.f)(\"amplify-totp-setup\",{user:this.authData}));case _auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_3__.a.Loading:return Object(_index_6200044a_js__WEBPACK_IMPORTED_MODULE_0__.f)(\"slot\",{name:\"loading\"},Object(_index_6200044a_js__WEBPACK_IMPORTED_MODULE_0__.f)(\"div\",null,\"Loading...\"));case _auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_3__.a.SignedIn:return[Object(_index_6200044a_js__WEBPACK_IMPORTED_MODULE_0__.f)(\"slot\",{name:\"greetings\"}),Object(_index_6200044a_js__WEBPACK_IMPORTED_MODULE_0__.f)(\"slot\",null)];default:throw new Error(`Unhandled auth state: ${authState}`)}}componentDidUnload(){_aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__.a.remove(_constants_2b619cf3_js__WEBPACK_IMPORTED_MODULE_5__.i,data=>{const{payload:payload}=data;payload.event===_constants_2b619cf3_js__WEBPACK_IMPORTED_MODULE_5__.h&&payload.message&&(this.toastMessage=payload.message)})}render(){return Object(_index_6200044a_js__WEBPACK_IMPORTED_MODULE_0__.f)(_index_6200044a_js__WEBPACK_IMPORTED_MODULE_0__.a,null,this.toastMessage?Object(_index_6200044a_js__WEBPACK_IMPORTED_MODULE_0__.f)(\"amplify-toast\",{message:this.toastMessage,handleClose:()=>{this.toastMessage=\"\"},\"data-test\":\"authenticator-error\"}):null,this.renderAuthComponent(this.authState))}}}}]);","extractedComments":[]}