{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{pptk:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"amplify_amazon_button\",(function(){return AmplifyAmazonButton})),__webpack_require__.d(__webpack_exports__,\"amplify_auth0_button\",(function(){return AmplifyAuth0Button})),__webpack_require__.d(__webpack_exports__,\"amplify_facebook_button\",(function(){return AmplifyFacebookButton})),__webpack_require__.d(__webpack_exports__,\"amplify_google_button\",(function(){return AmplifyGoogleButton})),__webpack_require__.d(__webpack_exports__,\"amplify_oauth_button\",(function(){return AmplifyOAuthButton}));var _index_6200044a_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(\"BZ0O\"),_aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(\"Nt7R\"),_aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(\"JIIv\"),_auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(\"s1tr\"),_Translations_6bb65e0f_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(\"CHJ9\"),_constants_2b619cf3_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(\"aut5\"),_helpers_bbc44569_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(\"JmXW\"),_aws_amplify_auth__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(\"v4IS\");const logger=new _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__.a(\"amplify-amazon-button\"),AmplifyAmazonButton=class{constructor(hostRef){Object(_index_6200044a_js__WEBPACK_IMPORTED_MODULE_0__.g)(this,hostRef),this.handleAuthStateChange=_helpers_bbc44569_js__WEBPACK_IMPORTED_MODULE_6__.d,this.federatedSignIn=response=>{const{access_token:access_token,expires_in:expires_in}=response;if(!access_token)return;if(!_aws_amplify_auth__WEBPACK_IMPORTED_MODULE_7__.a||\"function\"!=typeof _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_7__.a.federatedSignIn||\"function\"!=typeof _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_7__.a.currentAuthenticatedUser)throw new Error(_constants_2b619cf3_js__WEBPACK_IMPORTED_MODULE_5__.d);const expires_at=1e3*expires_in+(new Date).getTime();window.amazon.Login.retrieveProfile(async userInfo=>{if(!userInfo.success)return logger.debug(\"Get user Info failed\");const user={name:userInfo.profile.Name,email:userInfo.profile.PrimaryEmail};await _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_7__.a.federatedSignIn(\"amazon\",{token:access_token,expires_at:expires_at},user);const authenticatedUser=await _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_7__.a.currentAuthenticatedUser();this.handleAuthStateChange(_auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_3__.a.SignedIn,authenticatedUser)})}}signInWithAmazon(event){event.preventDefault(),window.amazon.Login.setClientId(this.clientId),window.amazon.Login.authorize({scope:\"profile\"},response=>{if(response.error)return logger.debug(\"Failed to login with amazon: \"+response.error);try{window.localStorage.setItem(_constants_2b619cf3_js__WEBPACK_IMPORTED_MODULE_5__.q,JSON.stringify({provider:\"amazon\"}))}catch(e){logger.debug(\"Failed to cache auth source into localStorage\",e)}this.federatedSignIn(response)})}render(){return Object(_index_6200044a_js__WEBPACK_IMPORTED_MODULE_0__.f)(\"amplify-sign-in-button\",{onClick:event=>this.signInWithAmazon(event),provider:\"amazon\"},Object(_index_6200044a_js__WEBPACK_IMPORTED_MODULE_0__.f)(\"script\",{src:\"https://assets.loginwithamazon.com/sdk/na/login1.js\"}),_aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__.a.get(_Translations_6bb65e0f_js__WEBPACK_IMPORTED_MODULE_4__.a.SIGN_IN_WITH_AMAZON))}},logger$1=new _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__.a(\"amplify-auth0-button\"),AmplifyAuth0Button=class{constructor(hostRef){Object(_index_6200044a_js__WEBPACK_IMPORTED_MODULE_0__.g)(this,hostRef),this.handleAuthStateChange=_helpers_bbc44569_js__WEBPACK_IMPORTED_MODULE_6__.d,this.handleLoad=()=>{const{oauth:oauth={}}=_aws_amplify_auth__WEBPACK_IMPORTED_MODULE_7__.a.configure({}),{config:config=oauth.auth0}=this;config?(logger$1.debug(\"auth0 configuration\",config),this._auth0||(this._auth0=new window.auth0.WebAuth(config)),this._auth0.parseHash((err,authResult)=>{if(err)return void logger$1.debug(\"Failed to parse the url for Auth0\",err);if(!authResult)return void logger$1.debug(\"Auth0 found no authResult in hash\");const payload={provider:\"auth0\",opts:{returnTo:config.returnTo,clientID:config.clientID,federated:config.federated}};try{localStorage.setItem(_constants_2b619cf3_js__WEBPACK_IMPORTED_MODULE_5__.q,JSON.stringify(payload))}catch(e){logger$1.debug(\"Failed to cache auth source into localStorage\",e)}this._auth0.client.userInfo(authResult.accessToken,async(err,user)=>{let username=void 0,email=void 0;err?logger$1.debug(\"Failed to get the user info\",err):(username=user.name,email=user.email),await _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_7__.a.federatedSignIn(config.domain,{token:authResult.idToken,expires_at:1e3*authResult.expiresIn+(new Date).getTime()},{name:username,email:email});const authenticatedUser=await _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_7__.a.currentAuthenticatedUser();this.handleAuthStateChange(_auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_3__.a.SignedIn,authenticatedUser)})})):logger$1.debug(\"Auth0 is not configured\")}}signInWithAuth0(event){if(event.preventDefault(),!this._auth0)throw new Error(\"the auth0 client is not configured\");this._auth0.authorize()}render(){return Object(_index_6200044a_js__WEBPACK_IMPORTED_MODULE_0__.f)(\"amplify-sign-in-button\",{onClick:event=>this.signInWithAuth0(event),provider:\"auth0\"},Object(_index_6200044a_js__WEBPACK_IMPORTED_MODULE_0__.f)(\"script\",{onLoad:this.handleLoad,src:\"https://cdn.auth0.com/js/auth0/9.11/auth0.min.js\"}),_aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__.a.get(_Translations_6bb65e0f_js__WEBPACK_IMPORTED_MODULE_4__.a.SIGN_IN_WITH_AUTH0))}},logger$2=new _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__.a(\"amplify-facebook-button\"),AmplifyFacebookButton=class{constructor(hostRef){Object(_index_6200044a_js__WEBPACK_IMPORTED_MODULE_0__.g)(this,hostRef),this.handleAuthStateChange=_helpers_bbc44569_js__WEBPACK_IMPORTED_MODULE_6__.d,this.federatedSignIn=authResponse=>{const{accessToken:accessToken,expiresIn:expiresIn}=authResponse;if(!accessToken)return;if(!_aws_amplify_auth__WEBPACK_IMPORTED_MODULE_7__.a||\"function\"!=typeof _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_7__.a.federatedSignIn||\"function\"!=typeof _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_7__.a.currentAuthenticatedUser)throw new Error(_constants_2b619cf3_js__WEBPACK_IMPORTED_MODULE_5__.d);const expires_at=1e3*expiresIn+(new Date).getTime();window.FB.api(\"/me\",{fields:\"name,email\"},async response=>{const user={name:response.name,email:response.email};await _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_7__.a.federatedSignIn(\"facebook\",{token:accessToken,expires_at:expires_at},user);const authenticatedUser=await _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_7__.a.currentAuthenticatedUser();this.handleAuthStateChange(_auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_3__.a.SignedIn,authenticatedUser)})},this.getLoginStatus=()=>{window.FB.getLoginStatus(response=>{try{window.localStorage.setItem(_constants_2b619cf3_js__WEBPACK_IMPORTED_MODULE_5__.q,JSON.stringify({provider:\"facebook\"}))}catch(e){logger$2.debug(\"Failed to cache auth source into localStorage\",e)}if(\"connected\"===response.status)return this.federatedSignIn(response.authResponse);this.login()})},this.login=()=>{window.FB.login(response=>{response&&response.authResponse&&this.federatedSignIn(response.authResponse)},{scope:\"public_profile,email\"})}}signInWithFacebook(event){event.preventDefault(),window.FB.init({appId:this.appId,cookie:!0,xfbml:!1,version:\"v5.0\"}),this.getLoginStatus()}render(){return Object(_index_6200044a_js__WEBPACK_IMPORTED_MODULE_0__.f)(\"amplify-sign-in-button\",{onClick:event=>this.signInWithFacebook(event),provider:\"facebook\"},Object(_index_6200044a_js__WEBPACK_IMPORTED_MODULE_0__.f)(\"script\",{async:!0,defer:!0,src:\"https://connect.facebook.net/en_US/sdk.js\"}),_aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__.a.get(_Translations_6bb65e0f_js__WEBPACK_IMPORTED_MODULE_4__.a.SIGN_IN_WITH_FACEBOOK))}},logger$3=new _aws_amplify_core__WEBPACK_IMPORTED_MODULE_1__.a(\"amplify-google-button\"),AmplifyGoogleButton=class{constructor(hostRef){Object(_index_6200044a_js__WEBPACK_IMPORTED_MODULE_0__.g)(this,hostRef),this.handleAuthStateChange=_helpers_bbc44569_js__WEBPACK_IMPORTED_MODULE_6__.d,this.handleError=error=>{console.error(error)},this.handleLoad=()=>{window.gapi.load(\"auth2\")},this.handleUser=async user=>{if(!_aws_amplify_auth__WEBPACK_IMPORTED_MODULE_7__.a||\"function\"!=typeof _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_7__.a.federatedSignIn||\"function\"!=typeof _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_7__.a.currentAuthenticatedUser)throw new Error(_constants_2b619cf3_js__WEBPACK_IMPORTED_MODULE_5__.d);try{window.localStorage.setItem(_constants_2b619cf3_js__WEBPACK_IMPORTED_MODULE_5__.q,JSON.stringify({provider:\"google\"}))}catch(e){logger$3.debug(\"Failed to cache auth source into localStorage\",e)}const{id_token:id_token,expires_at:expires_at}=user.getAuthResponse(),profile=user.getBasicProfile();await _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_7__.a.federatedSignIn(\"google\",{token:id_token,expires_at:expires_at},{email:profile.getEmail(),name:profile.getName(),picture:profile.getImageUrl()});const authenticatedUser=await _aws_amplify_auth__WEBPACK_IMPORTED_MODULE_7__.a.currentAuthenticatedUser();try{this.handleAuthStateChange(_auth_types_78df304e_js__WEBPACK_IMPORTED_MODULE_3__.a.SignedIn,authenticatedUser)}catch(error){this.handleError(error)}}}getAuthInstance(){return window.gapi&&window.gapi.auth2?window.gapi.auth2.getAuthInstance()||window.gapi.auth2.init({client_id:this.clientId,cookiepolicy:\"single_host_origin\",scope:\"profile email openid\"}):null}signInWithGoogle(event){event.preventDefault(),this.getAuthInstance().signIn().then(this.handleUser).catch(this.handleError)}render(){return Object(_index_6200044a_js__WEBPACK_IMPORTED_MODULE_0__.f)(\"amplify-sign-in-button\",{onClick:event=>this.signInWithGoogle(event),provider:\"google\"},Object(_index_6200044a_js__WEBPACK_IMPORTED_MODULE_0__.f)(\"script\",{onLoad:this.handleLoad,src:\"https://apis.google.com/js/api:client.js\"}),_aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__.a.get(_Translations_6bb65e0f_js__WEBPACK_IMPORTED_MODULE_4__.a.SIGN_IN_WITH_GOOGLE))}},AmplifyOAuthButton=class{constructor(hostRef){Object(_index_6200044a_js__WEBPACK_IMPORTED_MODULE_0__.g)(this,hostRef),this.config={}}signInWithOAuth(event){event.preventDefault(),_aws_amplify_auth__WEBPACK_IMPORTED_MODULE_7__.a.federatedSignIn()}render(){return Object(_index_6200044a_js__WEBPACK_IMPORTED_MODULE_0__.f)(\"amplify-sign-in-button\",{onClick:event=>this.signInWithOAuth(event),provider:\"oauth\"},this.config.label||_aws_amplify_core__WEBPACK_IMPORTED_MODULE_2__.a.get(_Translations_6bb65e0f_js__WEBPACK_IMPORTED_MODULE_4__.a.SIGN_IN_WITH_AWS))}}}}]);","extractedComments":[]}