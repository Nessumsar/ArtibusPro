(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{OIl5:function(e,t,a){"use strict";a.r(t),a.d(t,"amplify_confirm_sign_in",(function(){return c})),a.d(t,"amplify_confirm_sign_up",(function(){return p})),a.d(t,"amplify_forgot_password",(function(){return f})),a.d(t,"amplify_require_new_password",(function(){return b})),a.d(t,"amplify_sign_in",(function(){return F})),a.d(t,"amplify_sign_up",(function(){return y})),a.d(t,"amplify_toast",(function(){return I})),a.d(t,"amplify_verify_contact",(function(){return O}));var n=a("BZ0O"),i=a("JIIv"),s=a("HzrR"),r=a("Nt7R"),o=a("s1tr"),h=a("CHJ9"),l=a("aut5"),u=a("JmXW"),d=a("v4IS");const c=class{constructor(e){Object(n.g)(this,e),this.handleSubmit=e=>this.confirm(e),this.headerText=i.a.get(h.a.CONFIRM_SMS_CODE),this.submitButtonText=i.a.get(h.a.CONFIRM),this.handleAuthStateChange=u.d,this.formFields=[{type:"code",required:!0,handleInputChange:e=>this.handleCodeChange(e)}],this.mfaOption=o.c.SMS,this.loading=!1}componentWillLoad(){this.user&&this.user.challengeName===o.b.SoftwareTokenMFA&&(this.mfaOption=o.c.TOTP,this.headerText===i.a.get(h.a.CONFIRM_SMS_CODE)&&(this.headerText=i.a.get(h.a.CONFIRM_TOTP_CODE)))}handleCodeChange(e){this.code=e.target.value}checkContact(e){if(!d.a||"function"!=typeof d.a.verifiedContact)throw new Error(l.d);d.a.verifiedContact(e).then(t=>{Object(s.c)(t.verified)?(e=Object.assign(e,t),this.handleAuthStateChange(o.a.VerifyContact,e)):this.handleAuthStateChange(o.a.SignedIn,e)})}async confirm(e){e&&e.preventDefault();const t=this.user.challengeName===o.b.SoftwareTokenMFA?o.b.SoftwareTokenMFA:null;if(!d.a||"function"!=typeof d.a.confirmSignIn)throw new Error(l.d);this.loading=!0;try{await d.a.confirmSignIn(this.user,this.code,t),this.checkContact(this.user)}catch(a){Object(u.a)(a)}finally{this.loading=!1}}render(){return Object(n.f)("amplify-form-section",{headerText:this.headerText,handleSubmit:this.handleSubmit,submitButtonText:this.submitButtonText,loading:this.loading,secondaryFooterContent:Object(n.f)("span",null,Object(n.f)("amplify-button",{variant:"anchor",onClick:()=>this.handleAuthStateChange(o.a.SignIn)},i.a.get(h.a.BACK_TO_SIGN_IN)))},Object(n.f)("amplify-auth-fields",{formFields:this.formFields}))}},p=class{constructor(e){Object(n.g)(this,e),this.handleSubmit=e=>this.confirmSignUp(e),this.headerText=i.a.get(h.a.CONFIRM_SIGN_UP_HEADER_TEXT),this.submitButtonText=i.a.get(h.a.CONFIRM_SIGN_UP_SUBMIT_BUTTON_TEXT),this.formFields=[],this.handleAuthStateChange=u.d,this.usernameAlias="username",this.loading=!1,this.userInput=this.user?this.user.username:null,this._signUpAttrs=this.user&&this.user.signUpAttrs?this.user.signUpAttrs:null,this.newFormFields=[]}componentWillLoad(){Object(u.c)(this.usernameAlias),this.buildFormFields()}formFieldsHandler(){this.buildFormFields()}buildDefaultFormFields(){this.newFormFields=[{type:`${this.usernameAlias}`,required:!0,handleInputChange:this.handleFormFieldInputChange(`${this.usernameAlias}`),value:this.userInput,disabled:!!this.userInput},{type:"code",label:i.a.get(h.a.CONFIRM_SIGN_UP_CODE_LABEL),placeholder:i.a.get(h.a.CONFIRM_SIGN_UP_CODE_PLACEHOLDER),required:!0,hint:Object(n.f)("div",null,i.a.get(h.a.CONFIRM_SIGN_UP_LOST_CODE)," ",Object(n.f)("amplify-button",{variant:"anchor",onClick:()=>this.resendConfirmCode()},i.a.get(h.a.CONFIRM_SIGN_UP_RESEND_CODE))),handleInputChange:this.handleFormFieldInputChange("code")}]}buildFormFields(){if(0===this.formFields.length)this.buildDefaultFormFields();else{const e=[];this.formFields.forEach(t=>{const a=Object.assign({},t);"code"===a.type&&(a.hint=Object(u.f)(a)?Object(n.f)("div",null,i.a.get(h.a.CONFIRM_SIGN_UP_LOST_CODE)," ",Object(n.f)("amplify-button",{variant:"anchor",onClick:()=>this.resendConfirmCode()},i.a.get(h.a.CONFIRM_SIGN_UP_RESEND_CODE))):a.hint),a.handleInputChange=e=>this.handleFormFieldInputWithCallback(e,t),e.push(a)}),this.newFormFields=e}}handleFormFieldInputChange(e){switch(e){case"username":case"email":case"phone_number":return e=>this.userInput=e.target.value;case"code":return e=>this.code=e.target.value;default:return}}handleFormFieldInputWithCallback(e,t){(t.handleInputChange?t.handleInputChange:(e,t)=>{t(e)})(e,this.handleFormFieldInputChange(t.type).bind(this))}async resendConfirmCode(){if(event&&event.preventDefault(),!d.a||"function"!=typeof d.a.resendSignUp)throw new Error(l.d);try{if(!this.userInput)throw new Error("Username can not be empty");await d.a.resendSignUp(this.userInput),this.handleAuthStateChange(o.a.ConfirmSignUp)}catch(e){Object(u.a)(e)}}async confirmSignUp(e){if(e&&e.preventDefault(),!d.a||"function"!=typeof d.a.confirmSignUp)throw new Error(l.d);this.loading=!0;try{const e=await d.a.confirmSignUp(this.userInput,this.code)&&this._signUpAttrs&&await d.a.signIn(this.userInput,this._signUpAttrs.password);this.handleAuthStateChange(o.a.SignedIn,e)}catch(t){Object(u.a)(t)}finally{this.loading=!1}}render(){return Object(n.f)("amplify-form-section",{headerText:this.headerText,submitButtonText:this.submitButtonText,handleSubmit:this.handleSubmit,secondaryFooterContent:Object(n.f)("div",null,Object(n.f)("span",null,Object(n.f)("amplify-button",{variant:"anchor",onClick:()=>this.handleAuthStateChange(o.a.SignIn)},i.a.get(h.a.BACK_TO_SIGN_IN))))},Object(n.f)("amplify-auth-fields",{formFields:this.newFormFields}))}static get watchers(){return{formFields:["formFieldsHandler"]}}},m=new r.a("ForgotPassword"),f=class{constructor(e){Object(n.g)(this,e),this.headerText=i.a.get(h.a.RESET_YOUR_PASSWORD),this.submitButtonText=i.a.get(h.a.SEND_CODE),this.formFields=[],this.handleSend=e=>this.send(e),this.handleSubmit=e=>this.submit(e),this.handleAuthStateChange=u.d,this.usernameAlias="username",this.delivery=null,this.loading=!1,this.phoneNumber={countryDialCodeValue:l.b,phoneNumberValue:null},this.newFormFields=[],this.forgotPasswordAttrs={userInput:"",password:"",code:""}}componentWillLoad(){Object(u.c)(this.usernameAlias),this.buildFormFields()}formFieldsHandler(){this.buildFormFields()}buildFormFields(){0===this.formFields.length?this.buildDefaultFormFields():this.formFields.forEach(e=>{const t=Object.assign({},e);t.handleInputChange=t=>this.handleFormFieldInputWithCallback(t,e),this.newFormFields.push(t)})}buildDefaultFormFields(){switch(this.usernameAlias){case"email":this.newFormFields=[{type:"email",required:!0,handleInputChange:this.handleFormFieldInputChange("email"),inputProps:{"data-test":"forgot-password-email-input"}}];break;case"phone_number":this.newFormFields=[{type:"phone_number",required:!0,handleInputChange:this.handleFormFieldInputChange("phone_number"),inputProps:{"data-test":"forgot-password-phone-number-input"}}];break;case"username":default:this.newFormFields=[{type:"username",required:!0,handleInputChange:this.handleFormFieldInputChange("username"),inputProps:{"data-test":"forgot-password-username-input"}}]}}handleFormFieldInputChange(e){switch(e){case"username":case"email":return e=>this.forgotPasswordAttrs.userInput=e.target.value;case"phone_number":return e=>this.handlePhoneNumberChange(e);case"password":case"code":return t=>this.forgotPasswordAttrs[e]=t.target.value;default:return}}handleFormFieldInputWithCallback(e,t){(t.handleInputChange?t.handleInputChange:(e,t)=>{t(e)})(e,this.handleFormFieldInputChange(t.type).bind(this))}handlePhoneNumberChange(e){const t=e.target.name,a=e.target.value;t===l.n&&(this.phoneNumber.countryDialCodeValue=a),t===l.o&&(this.phoneNumber.phoneNumberValue=a)}async send(e){if(e&&e.preventDefault(),!d.a||"function"!=typeof d.a.forgotPassword)throw new Error(l.d);switch(this.loading=!0,this.usernameAlias){case"phone_number":this.forgotPasswordAttrs.userInput=Object(u.b)(this.phoneNumber)}try{const e=await d.a.forgotPassword(this.forgotPasswordAttrs.userInput);m.debug(e),this.newFormFields=[{type:"code",required:!0,handleInputChange:this.handleFormFieldInputChange("code"),inputProps:{"data-test":"forgot-password-code-input"}},{type:"password",required:!0,handleInputChange:this.handleFormFieldInputChange("password"),label:i.a.get(h.a.NEW_PASSWORD_LABEL),placeholder:i.a.get(h.a.NEW_PASSWORD_PLACEHOLDER)}],this.delivery=e.CodeDeliveryDetails}catch(t){Object(u.a)(t)}finally{this.loading=!1}}async submit(e){if(e&&e.preventDefault(),!d.a||"function"!=typeof d.a.forgotPasswordSubmit)throw new Error(l.d);this.loading=!0;try{const{userInput:e,code:t,password:a}=this.forgotPasswordAttrs,n=await d.a.forgotPasswordSubmit(e,t,a);m.debug(n),this.handleAuthStateChange(o.a.SignIn),this.delivery=null}catch(t){Object(u.a)(t)}finally{this.loading=!1}}render(){const e=this.delivery?e=>this.handleSubmit(e):e=>this.handleSend(e);return Object(n.f)("amplify-form-section",{headerText:this.headerText,handleSubmit:e,loading:this.loading,secondaryFooterContent:Object(n.f)("amplify-button",{variant:"anchor",onClick:()=>this.handleAuthStateChange(o.a.SignIn),"data-test":"forgot-password-back-to-sign-in-link"},i.a.get(h.a.BACK_TO_SIGN_IN)),testDataPrefix:"forgot-password",submitButtonText:i.a.get(h.a.SEND_CODE)},Object(n.f)("amplify-auth-fields",{formFields:this.newFormFields}))}static get watchers(){return{formFields:["formFieldsHandler"]}}},g=new r.a("amplify-require-new-password"),b=class{constructor(e){Object(n.g)(this,e),this.headerText=i.a.get(h.a.CHANGE_PASSWORD),this.submitButtonText=i.a.get(h.a.CHANGE_PASSWORD_ACTION),this.handleSubmit=e=>this.completeNewPassword(e),this.handleAuthStateChange=u.d,this.formFields=[{type:o.e.Password,required:!0,handleInputChange:e=>this.handlePasswordChange(e),label:i.a.get(h.a.NEW_PASSWORD_LABEL),placeholder:i.a.get(h.a.NEW_PASSWORD_PLACEHOLDER)}],this.loading=!1,this.requiredAttributes={},this.newFormFields=this.formFields}handleRequiredAttributeInputChange(e,t){this.requiredAttributes[e]=t.target.value}componentWillLoad(){this.user&&this.user.challengeParam.requiredAttributes&&this.user.challengeParam.requiredAttributes.forEach(e=>{this.newFormFields.push({type:e,required:!0,label:u.g[e].label,placeholder:u.g[e].placeholder,handleInputChange:t=>this.handleRequiredAttributeInputChange(e,t)})})}handlePasswordChange(e){this.password=e.target.value}async checkContact(e){if(!d.a||"function"!=typeof d.a.verifiedContact)throw new Error(l.d);try{const t=await d.a.verifiedContact(e);Object(s.c)(t.verified)?(e=Object.assign(e,t),this.handleAuthStateChange(o.a.VerifyContact,e)):this.handleAuthStateChange(o.a.SignedIn,e)}catch(t){Object(u.a)(t)}}async completeNewPassword(e){if(e&&e.preventDefault(),!d.a||"function"!=typeof d.a.completeNewPassword)throw new Error(l.d);this.loading=!0;try{const e=await d.a.completeNewPassword(this.user,this.password,this.requiredAttributes);switch(g.debug("complete new password",e),e.challengeName){case o.b.SMSMFA:this.handleAuthStateChange(o.a.ConfirmSignIn,e);break;case o.b.MFASetup:g.debug("TOTP setup",e.challengeParam),this.handleAuthStateChange(o.a.TOTPSetup,e);break;default:this.checkContact(e)}}catch(t){Object(u.a)(t)}finally{this.loading=!1}}render(){return Object(n.f)("amplify-form-section",{headerText:this.headerText,handleSubmit:this.handleSubmit,loading:this.loading,secondaryFooterContent:Object(n.f)("amplify-button",{variant:"anchor",onClick:()=>this.handleAuthStateChange(o.a.SignIn)},i.a.get(h.a.BACK_TO_SIGN_IN))},Object(n.f)("amplify-auth-fields",{formFields:this.newFormFields}))}},C=new r.a("SignIn"),F=class{constructor(e){Object(n.g)(this,e),this.handleSubmit=e=>this.signIn(e),this.headerText=i.a.get(h.a.SIGN_IN_HEADER_TEXT),this.submitButtonText=i.a.get(h.a.SIGN_IN_ACTION),this.handleAuthStateChange=u.d,this.usernameAlias="username",this.formFields=[],this.newFormFields=[],this.loading=!1,this.phoneNumber={countryDialCodeValue:l.b,phoneNumberValue:null},this.signInAttributes={userInput:"",password:""}}handleFormFieldInputChange(e){switch(e){case"username":case"email":return e=>this.signInAttributes.userInput=e.target.value;case"phone_number":return e=>this.handlePhoneNumberChange(e);case"password":return e=>this.signInAttributes.password=e.target.value}}handleFormFieldInputWithCallback(e,t){(t.handleInputChange?t.handleInputChange:(e,t)=>{t(e)})(e,this.handleFormFieldInputChange(t.type).bind(this))}handlePhoneNumberChange(e){const t=e.target.name,a=e.target.value;t===l.n&&(this.phoneNumber.countryDialCodeValue=a),t===l.o&&(this.phoneNumber.phoneNumberValue=a)}checkContact(e){if(!d.a||"function"!=typeof d.a.verifiedContact)throw new Error(l.d);d.a.verifiedContact(e).then(t=>{Object(s.c)(t.verified)?(e=Object.assign(e,t),this.handleAuthStateChange(o.a.VerifyContact,e)):this.handleAuthStateChange(o.a.SignedIn,e)})}async signIn(e){if(e&&e.preventDefault(),!d.a||"function"!=typeof d.a.signIn)throw new Error(l.d);switch(this.loading=!0,this.usernameAlias){case"phone_number":this.signInAttributes.userInput=Object(u.b)(this.phoneNumber)}try{const e=await d.a.signIn(this.signInAttributes.userInput,this.signInAttributes.password);C.debug(e),e.challengeName===o.b.SMSMFA||e.challengeName===o.b.SoftwareTokenMFA?(C.debug("confirm user with "+e.challengeName),this.handleAuthStateChange(o.a.ConfirmSignIn,e)):e.challengeName===o.b.NewPasswordRequired?(C.debug("require new password",e.challengeParam),this.handleAuthStateChange(o.a.ResetPassword,e)):e.challengeName===o.b.MFASetup?(C.debug("TOTP setup",e.challengeParam),this.handleAuthStateChange(o.a.TOTPSetup,e)):e.challengeName===o.b.CustomChallenge&&e.challengeParam&&"true"===e.challengeParam.trigger?(C.debug("custom challenge",e.challengeParam),this.handleAuthStateChange(o.a.CustomConfirmSignIn,e)):this.checkContact(e)}catch(t){Object(u.a)(t),"UserNotConfirmedException"===t.code?(C.debug("the user is not confirmed"),this.handleAuthStateChange(o.a.ConfirmSignUp,{username:this.signInAttributes.userInput})):"PasswordResetRequiredException"===t.code&&(C.debug("the user requires a new password"),this.handleAuthStateChange(o.a.ForgotPassword,{username:this.signInAttributes.userInput}))}finally{this.loading=!1}}buildDefaultFormFields(){const e=[];switch(this.usernameAlias){case"email":e.push({type:"email",required:!0,handleInputChange:this.handleFormFieldInputChange("email"),inputProps:{"data-test":"sign-in-email-input"}});break;case"phone_number":e.push({type:"phone_number",required:!0,handleInputChange:this.handleFormFieldInputChange("phone_number"),inputProps:{"data-test":"sign-in-phone-number-input"}});break;case"username":default:e.push({type:"username",required:!0,handleInputChange:this.handleFormFieldInputChange("username"),inputProps:{"data-test":"sign-in-username-input"}})}e.push({type:"password",hint:Object(n.f)("div",null,i.a.get(h.a.FORGOT_PASSWORD_TEXT)," ",Object(n.f)("amplify-button",{variant:"anchor",onClick:()=>this.handleAuthStateChange(o.a.ForgotPassword),"data-test":"sign-in-forgot-password-link"},i.a.get(h.a.RESET_PASSWORD_TEXT))),required:!0,handleInputChange:this.handleFormFieldInputChange("password"),inputProps:{"data-test":"sign-in-password-input"}}),this.newFormFields=[...e]}buildFormFields(){if(0===this.formFields.length)this.buildDefaultFormFields();else{const e=[];this.formFields.forEach(t=>{const a=Object.assign({},t);"password"===a.type&&(a.hint=Object(u.f)(a)?Object(n.f)("div",null,i.a.get(h.a.FORGOT_PASSWORD_TEXT)," ",Object(n.f)("amplify-button",{variant:"anchor",onClick:()=>this.handleAuthStateChange(o.a.ForgotPassword),"data-test":"sign-in-forgot-password-link"},i.a.get(h.a.RESET_PASSWORD_TEXT))):a.hint),a.handleInputChange=e=>this.handleFormFieldInputWithCallback(e,t),e.push(a)}),this.newFormFields=e}}componentWillLoad(){Object(u.c)(this.usernameAlias),this.buildFormFields()}formFieldsHandler(){this.buildFormFields()}render(){return Object(n.f)("amplify-form-section",{headerText:this.headerText,handleSubmit:this.handleSubmit,testDataPrefix:"sign-in"},Object(n.f)("amplify-federated-buttons",{handleAuthStateChange:this.handleAuthStateChange,federated:this.federated}),!Object(s.c)(this.federated)&&Object(n.f)("amplify-strike",null,"or"),Object(n.f)("amplify-auth-fields",{formFields:this.newFormFields}),Object(n.f)("div",{slot:"amplify-form-section-footer",class:"sign-in-form-footer"},Object(n.f)("slot",{name:"footer"},Object(n.f)("slot",{name:"secondary-footer-content"},Object(n.f)("span",null,i.a.get(h.a.NO_ACCOUNT_TEXT)," ",Object(n.f)("amplify-button",{variant:"anchor",onClick:()=>this.handleAuthStateChange(o.a.SignUp),"data-test":"sign-in-create-account-link"},i.a.get(h.a.CREATE_ACCOUNT_TEXT)))),Object(n.f)("slot",{name:"primary-footer-content"},Object(n.f)("amplify-button",{type:"submit",disabled:this.loading,"data-test":"sign-in-sign-in-button"},Object(n.f)("amplify-loading-spinner",{style:{display:this.loading?"initial":"none"}}),Object(n.f)("span",{style:{display:this.loading?"none":"initial"}},this.submitButtonText))))))}static get watchers(){return{formFields:["formFieldsHandler"]}}};F.style=":host{--footer-size:var(--amplify-text-sm);--footer-color:var(--amplify-grey);--footer-font-family:var(--amplify-font-family)}.sign-in-form-footer{font-family:var(--footer-font-family);font-weight:300;font-size:var(--footer-size);color:var(--footer-color);margin-bottom:10px;display:-ms-flexbox;display:flex;-ms-flex-direction:column-reverse;flex-direction:column-reverse;-ms-flex-align:center;align-items:center;-ms-flex-pack:distribute;justify-content:space-around}@media (min-width: 672px){.sign-in-form-footer{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:baseline;align-items:baseline}}.sign-in-form-footer *+*{margin-bottom:15px}";const y=class{constructor(e){Object(n.g)(this,e),this.handleSubmit=e=>this.signUp(e),this.headerText=i.a.get(h.a.SIGN_UP_HEADER_TEXT),this.submitButtonText=i.a.get(h.a.SIGN_UP_SUBMIT_BUTTON_TEXT),this.haveAccountText=i.a.get(h.a.SIGN_UP_HAVE_ACCOUNT_TEXT),this.signInText=i.a.get(h.a.SIGN_IN_TEXT),this.formFields=[],this.handleAuthStateChange=u.d,this.usernameAlias="username",this.newFormFields=[],this.phoneNumber={countryDialCodeValue:l.b,phoneNumberValue:null},this.loading=!1,this.signUpAttributes={username:"",password:"",attributes:{}}}handleFormFieldInputChange(e){switch(e){case"username":return e=>this.signUpAttributes.username=e.target.value;case"password":return e=>this.signUpAttributes.password=e.target.value;case"email":return e=>this.signUpAttributes.attributes.email=e.target.value;case"phone_number":return e=>this.handlePhoneNumberChange(e);default:return t=>this.signUpAttributes.attributes[e]=t.target.value}}handleFormFieldInputWithCallback(e,t){(t.handleInputChange?t.handleInputChange:(e,t)=>{t(e)})(e,this.handleFormFieldInputChange(t.type).bind(this))}handlePhoneNumberChange(e){const t=e.target.name,a=e.target.value;t===l.n&&(this.phoneNumber.countryDialCodeValue=a),t===l.o&&(this.phoneNumber.phoneNumberValue=a)}async signUp(e){if(e&&e.preventDefault(),!d.a||"function"!=typeof d.a.signUp)throw new Error(l.d);switch(this.phoneNumber.phoneNumberValue&&(this.signUpAttributes.attributes.phone_number=Object(u.b)(this.phoneNumber)),this.usernameAlias){case"email":case"phone_number":this.signUpAttributes.username=this.signUpAttributes.attributes[this.usernameAlias]}try{const e=await d.a.signUp(this.signUpAttributes);this.handleAuthStateChange(o.a.ConfirmSignUp,Object.assign(Object.assign({},e.user),{signUpAttrs:this.signUpAttributes}))}catch(t){Object(u.a)(t)}}buildDefaultFormFields(){switch(this.usernameAlias){case"email":this.newFormFields=[{type:"email",placeholder:i.a.get(h.a.SIGN_UP_EMAIL_PLACEHOLDER),required:!0,handleInputChange:this.handleFormFieldInputChange("email"),inputProps:{"data-test":"sign-up-email-input"}},{type:"password",placeholder:i.a.get(h.a.SIGN_UP_PASSWORD_PLACEHOLDER),required:!0,handleInputChange:this.handleFormFieldInputChange("password"),inputProps:{"data-test":"sign-up-password-input"}},{type:"phone_number",required:!0,handleInputChange:this.handleFormFieldInputChange("phone_number"),inputProps:{"data-test":"sign-up-phone-number-input"}}];break;case"phone_number":this.newFormFields=[{type:"phone_number",required:!0,handleInputChange:this.handleFormFieldInputChange("phone_number"),inputProps:{"data-test":"sign-up-phone-number-input"}},{type:"password",placeholder:i.a.get(h.a.SIGN_UP_PASSWORD_PLACEHOLDER),required:!0,handleInputChange:this.handleFormFieldInputChange("password"),inputProps:{"data-test":"sign-up-password-input"}},{type:"email",placeholder:i.a.get(h.a.SIGN_UP_EMAIL_PLACEHOLDER),required:!0,handleInputChange:this.handleFormFieldInputChange("email"),inputProps:{"data-test":"sign-up-email-input"}}];break;case"username":default:this.newFormFields=[{type:"username",placeholder:i.a.get(h.a.SIGN_UP_USERNAME_PLACEHOLDER),required:!0,handleInputChange:this.handleFormFieldInputChange("username"),inputProps:{"data-test":"sign-up-username-input"}},{type:"password",placeholder:i.a.get(h.a.SIGN_UP_PASSWORD_PLACEHOLDER),required:!0,handleInputChange:this.handleFormFieldInputChange("password"),inputProps:{"data-test":"sign-up-password-input"}},{type:"email",placeholder:i.a.get(h.a.SIGN_UP_EMAIL_PLACEHOLDER),required:!0,handleInputChange:this.handleFormFieldInputChange("email"),inputProps:{"data-test":"sign-up-email-input"}},{type:"phone_number",required:!0,handleInputChange:this.handleFormFieldInputChange("phone_number"),inputProps:{"data-test":"sign-up-phone-number-input"}}]}}buildFormFields(){if(0===this.formFields.length)this.buildDefaultFormFields();else{const e=[];this.formFields.forEach(t=>{const a=Object.assign({},t);a.handleInputChange=e=>this.handleFormFieldInputWithCallback(e,t),e.push(a)}),this.newFormFields=e}}componentWillLoad(){Object(u.c)(this.usernameAlias),this.buildFormFields()}formFieldsHandler(){this.buildFormFields()}render(){return Object(n.f)("amplify-form-section",{headerText:this.headerText,handleSubmit:this.handleSubmit,testDataPrefix:"sign-up"},Object(n.f)("amplify-auth-fields",{formFields:this.newFormFields}),Object(n.f)("div",{class:"sign-up-form-footer",slot:"amplify-form-section-footer"},Object(n.f)("slot",{name:"footer"},Object(n.f)("slot",{name:"secondary-footer-content"},Object(n.f)("span",null,this.haveAccountText," ",Object(n.f)("amplify-button",{variant:"anchor",onClick:()=>this.handleAuthStateChange(o.a.SignIn),"data-test":"sign-up-sign-in-link"},this.signInText))),Object(n.f)("slot",{name:"primary-footer-content"},Object(n.f)("amplify-button",{type:"submit","data-test":"sign-up-create-account-button"},Object(n.f)("amplify-loading-spinner",{style:{display:this.loading?"initial":"none"}}),Object(n.f)("span",{style:{display:this.loading?"none":"initial"}},this.submitButtonText))))))}static get watchers(){return{formFields:["formFieldsHandler"]}}};y.style=":host{--footer-font-family:var(--amplify-font-family);--footer-font-size:var(--amplify-text-sm);--footer-color:var(--amplify-grey)}.sign-up-form-footer{font-family:var(--footer-font-family);font-weight:300;font-size:var(--footer-font-size);color:var(--footer-color);display:-ms-flexbox;display:flex;-ms-flex-direction:column-reverse;flex-direction:column-reverse;-ms-flex-align:center;align-items:center;-ms-flex-pack:distribute;justify-content:space-around}@media (min-width: 672px){.sign-up-form-footer{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:baseline;align-items:baseline}}.sign-up-form-footer *+*{margin-bottom:15px}";const I=class{constructor(e){Object(n.g)(this,e),this.message=""}render(){return Object(n.f)("div",{class:"toast"},Object(n.f)("amplify-icon",{class:"toast-icon",name:"warning"}),this.message?Object(n.f)("span",null,this.message):null,Object(n.f)("slot",null),Object(n.f)("button",{class:"toast-close",onClick:this.handleClose}))}};I.style=':host{--background-color:var(--amplify-secondary-tint);--color:var(--amplify-white);--font-size:var(--amplify-text-sm);--font-family:var(--amplify-font-family);--close-icon-color:var(--amplify-white);--close-icon-hover:var(--amplify-red)}.toast-icon{padding-right:5px}.toast{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;position:absolute;top:0;left:0;width:100%;z-index:99;-webkit-box-shadow:0 0 5px 0 rgba(0, 0, 0, 0.3);box-shadow:0 0 5px 0 rgba(0, 0, 0, 0.3);padding:16px;background-color:var(--background-color);font-size:var(--font-size);color:var(--color);-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:5px;font-family:var(--font-family)}.toast>span{margin-right:10px}.toast-close{margin-left:auto;-ms-flex-item-align:center;align-self:center;position:relative;width:18px;height:18px;overflow:hidden;cursor:pointer;background:transparent;border:none}.toast-close::before,.toast-close::after{content:"";position:absolute;height:2px;width:100%;top:50%;left:0;margin-top:-1px;background:var(--close-icon-color)}.toast-close:hover::before,.toast-close:hover::after{background:var(--close-icon-hover)}.toast-close::before{-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);-o-transform:rotate(45deg);transform:rotate(45deg)}.toast-close::after{-webkit-transform:rotate(-45deg);-moz-transform:rotate(-45deg);-ms-transform:rotate(-45deg);-o-transform:rotate(-45deg);transform:rotate(-45deg)}';const w=new r.a("AmplifyVerifyContact"),O=class{constructor(e){Object(n.g)(this,e),this.handleAuthStateChange=u.d,this.loading=!1}handleSubmit(e){e.preventDefault(),this.verifyAttr?this.submit(this.code):this.verify(this.contact)}async submit(e){const t=this.verifyAttr;if(!d.a||"function"!=typeof d.a.verifyCurrentUserAttributeSubmit)throw new Error(l.d);this.loading=!0;try{const a=await d.a.verifyCurrentUserAttributeSubmit(t,e);w.debug(a),this.handleAuthStateChange(o.a.SignedIn,this.user),this.verifyAttr=null}catch(a){Object(u.a)(a),w.error(a)}finally{this.loading=!1}}async verify(e){if(e){if(!d.a||"function"!=typeof d.a.verifyCurrentUserAttribute)throw new Error(l.d);this.loading=!0;try{const t=await d.a.verifyCurrentUserAttribute(e);w.debug(t),this.verifyAttr=e}catch(t){Object(u.a)(t),w.error(t)}finally{this.loading=!1}}else w.error("Neither Email nor Phone Number selected")}handleInputChange(e){const t=e.target.name;"code"===t?this.code=e.target.value:"contact"===t&&(this.contact=e.target.value)}renderSubmit(){return Object(n.f)("div",null,Object(n.f)("amplify-input",{inputProps:{autocomplete:"off"},name:"code",placeholder:i.a.get(h.a.CODE_PLACEHOLDER),handleInputChange:e=>this.handleInputChange(e)}))}renderVerify(){const e=this.user;if(!e)return w.debug("No user to verify"),null;const{unverified:t}=e;if(!t)return w.debug("Unverified variable does not exist on user"),null;const{email:a,phone_number:s}=t;return Object(n.f)("div",null,a&&Object(n.f)("amplify-radio-button",{label:i.a.get(h.a.VERIFY_CONTACT_EMAIL_LABEL),key:"email",name:"contact",value:"email",handleInputChange:e=>this.handleInputChange(e)}),s&&Object(n.f)("amplify-radio-button",{label:i.a.get(h.a.VERIFY_CONTACT_PHONE_LABEL),key:"phone_number",name:"contact",value:"phone_number",handleInputChange:e=>this.handleInputChange(e)}))}render(){return Object(n.f)("amplify-form-section",{handleSubmit:e=>this.handleSubmit(e),headerText:i.a.get(h.a.VERIFY_CONTACT_HEADER_TEXT),loading:this.loading,secondaryFooterContent:Object(n.f)("span",null,Object(n.f)("amplify-button",{variant:"anchor",onClick:()=>this.handleAuthStateChange(o.a.SignedIn,this.user)},"Skip")),submitButtonText:i.a.get(this.verifyAttr?h.a.VERIFY_CONTACT_SUBMIT_LABEL:h.a.VERIFY_CONTACT_VERIFY_LABEL)},this.verifyAttr?this.renderSubmit():this.renderVerify())}}}}]);