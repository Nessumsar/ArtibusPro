function asyncGeneratorStep(e,t,n,a,r,i,s){try{var o=e[i](s),u=o.value}catch(l){return void n(l)}o.done?t(u):Promise.resolve(u).then(a,r)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var i=e.apply(t,n);function s(e){asyncGeneratorStep(i,a,r,s,o,"next",e)}function o(e){asyncGeneratorStep(i,a,r,s,o,"throw",e)}s(void 0)}))}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{OIl5:function(e,t,n){"use strict";n.r(t),n.d(t,"amplify_confirm_sign_in",(function(){return d})),n.d(t,"amplify_confirm_sign_up",(function(){return f})),n.d(t,"amplify_forgot_password",(function(){return m})),n.d(t,"amplify_require_new_password",(function(){return b})),n.d(t,"amplify_sign_in",(function(){return y})),n.d(t,"amplify_sign_up",(function(){return C})),n.d(t,"amplify_toast",(function(){return F})),n.d(t,"amplify_verify_contact",(function(){return w}));var a=n("BZ0O"),r=n("JIIv"),i=n("HzrR"),s=n("Nt7R"),o=n("s1tr"),u=n("CHJ9"),l=n("aut5"),h=n("JmXW"),c=n("v4IS"),d=function(){function e(t){var n=this;_classCallCheck(this,e),Object(a.g)(this,t),this.handleSubmit=function(e){return n.confirm(e)},this.headerText=r.a.get(u.a.CONFIRM_SMS_CODE),this.submitButtonText=r.a.get(u.a.CONFIRM),this.handleAuthStateChange=h.d,this.formFields=[{type:"code",required:!0,handleInputChange:function(e){return n.handleCodeChange(e)}}],this.mfaOption=o.c.SMS,this.loading=!1}var t;return _createClass(e,[{key:"componentWillLoad",value:function(){this.user&&this.user.challengeName===o.b.SoftwareTokenMFA&&(this.mfaOption=o.c.TOTP,this.headerText===r.a.get(u.a.CONFIRM_SMS_CODE)&&(this.headerText=r.a.get(u.a.CONFIRM_TOTP_CODE)))}},{key:"handleCodeChange",value:function(e){this.code=e.target.value}},{key:"checkContact",value:function(e){var t=this;if(!c.a||"function"!=typeof c.a.verifiedContact)throw new Error(l.d);c.a.verifiedContact(e).then((function(n){Object(i.c)(n.verified)?(e=Object.assign(e,n),t.handleAuthStateChange(o.a.VerifyContact,e)):t.handleAuthStateChange(o.a.SignedIn,e)}))}},{key:"confirm",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.preventDefault(),n=this.user.challengeName===o.b.SoftwareTokenMFA?o.b.SoftwareTokenMFA:null,c.a&&"function"==typeof c.a.confirmSignIn){e.next=4;break}throw new Error(l.d);case 4:return this.loading=!0,e.prev=5,e.next=8,c.a.confirmSignIn(this.user,this.code,n);case 8:this.checkContact(this.user),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),Object(h.a)(e.t0);case 14:return e.prev=14,this.loading=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[5,11,14,17]])}))),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;return Object(a.f)("amplify-form-section",{headerText:this.headerText,handleSubmit:this.handleSubmit,submitButtonText:this.submitButtonText,loading:this.loading,secondaryFooterContent:Object(a.f)("span",null,Object(a.f)("amplify-button",{variant:"anchor",onClick:function(){return e.handleAuthStateChange(o.a.SignIn)}},r.a.get(u.a.BACK_TO_SIGN_IN)))},Object(a.f)("amplify-auth-fields",{formFields:this.formFields}))}}]),e}(),f=function(){function e(t){var n=this;_classCallCheck(this,e),Object(a.g)(this,t),this.handleSubmit=function(e){return n.confirmSignUp(e)},this.headerText=r.a.get(u.a.CONFIRM_SIGN_UP_HEADER_TEXT),this.submitButtonText=r.a.get(u.a.CONFIRM_SIGN_UP_SUBMIT_BUTTON_TEXT),this.formFields=[],this.handleAuthStateChange=h.d,this.usernameAlias="username",this.loading=!1,this.userInput=this.user?this.user.username:null,this._signUpAttrs=this.user&&this.user.signUpAttrs?this.user.signUpAttrs:null,this.newFormFields=[]}var t,n;return _createClass(e,[{key:"componentWillLoad",value:function(){Object(h.c)(this.usernameAlias),this.buildFormFields()}},{key:"formFieldsHandler",value:function(){this.buildFormFields()}},{key:"buildDefaultFormFields",value:function(){var e=this;this.newFormFields=[{type:"".concat(this.usernameAlias),required:!0,handleInputChange:this.handleFormFieldInputChange("".concat(this.usernameAlias)),value:this.userInput,disabled:!!this.userInput},{type:"code",label:r.a.get(u.a.CONFIRM_SIGN_UP_CODE_LABEL),placeholder:r.a.get(u.a.CONFIRM_SIGN_UP_CODE_PLACEHOLDER),required:!0,hint:Object(a.f)("div",null,r.a.get(u.a.CONFIRM_SIGN_UP_LOST_CODE)," ",Object(a.f)("amplify-button",{variant:"anchor",onClick:function(){return e.resendConfirmCode()}},r.a.get(u.a.CONFIRM_SIGN_UP_RESEND_CODE))),handleInputChange:this.handleFormFieldInputChange("code")}]}},{key:"buildFormFields",value:function(){var e=this;if(0===this.formFields.length)this.buildDefaultFormFields();else{var t=[];this.formFields.forEach((function(n){var i=Object.assign({},n);"code"===i.type&&(i.hint=Object(h.f)(i)?Object(a.f)("div",null,r.a.get(u.a.CONFIRM_SIGN_UP_LOST_CODE)," ",Object(a.f)("amplify-button",{variant:"anchor",onClick:function(){return e.resendConfirmCode()}},r.a.get(u.a.CONFIRM_SIGN_UP_RESEND_CODE))):i.hint),i.handleInputChange=function(t){return e.handleFormFieldInputWithCallback(t,n)},t.push(i)})),this.newFormFields=t}}},{key:"handleFormFieldInputChange",value:function(e){var t=this;switch(e){case"username":case"email":case"phone_number":return function(e){return t.userInput=e.target.value};case"code":return function(e){return t.code=e.target.value};default:return}}},{key:"handleFormFieldInputWithCallback",value:function(e,t){(t.handleInputChange?t.handleInputChange:function(e,t){t(e)})(e,this.handleFormFieldInputChange(t.type).bind(this))}},{key:"resendConfirmCode",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(event&&event.preventDefault(),c.a&&"function"==typeof c.a.resendSignUp){e.next=2;break}throw new Error(l.d);case 2:if(e.prev=2,this.userInput){e.next=5;break}throw new Error("Username can not be empty");case 5:return e.next=7,c.a.resendSignUp(this.userInput);case 7:this.handleAuthStateChange(o.a.ConfirmSignUp),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),Object(h.a)(e.t0);case 13:case"end":return e.stop()}}),e,this,[[2,10]])}))),function(){return n.apply(this,arguments)})},{key:"confirmSignUp",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.preventDefault(),c.a&&"function"==typeof c.a.confirmSignUp){e.next=2;break}throw new Error(l.d);case 2:return this.loading=!0,e.prev=3,e.next=6,c.a.confirmSignUp(this.userInput,this.code);case 6:if(e.t1=e.sent,!e.t1){e.next=9;break}e.t1=this._signUpAttrs;case 9:if(e.t0=e.t1,!e.t0){e.next=14;break}return e.next=13,c.a.signIn(this.userInput,this._signUpAttrs.password);case 13:e.t0=e.sent;case 14:n=e.t0,this.handleAuthStateChange(o.a.SignedIn,n),e.next=21;break;case 18:e.prev=18,e.t2=e.catch(3),Object(h.a)(e.t2);case 21:return e.prev=21,this.loading=!1,e.finish(21);case 24:case"end":return e.stop()}}),e,this,[[3,18,21,24]])}))),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;return Object(a.f)("amplify-form-section",{headerText:this.headerText,submitButtonText:this.submitButtonText,handleSubmit:this.handleSubmit,secondaryFooterContent:Object(a.f)("div",null,Object(a.f)("span",null,Object(a.f)("amplify-button",{variant:"anchor",onClick:function(){return e.handleAuthStateChange(o.a.SignIn)}},r.a.get(u.a.BACK_TO_SIGN_IN))))},Object(a.f)("amplify-auth-fields",{formFields:this.newFormFields}))}}],[{key:"watchers",get:function(){return{formFields:["formFieldsHandler"]}}}]),e}(),p=new s.a("ForgotPassword"),m=function(){function e(t){var n=this;_classCallCheck(this,e),Object(a.g)(this,t),this.headerText=r.a.get(u.a.RESET_YOUR_PASSWORD),this.submitButtonText=r.a.get(u.a.SEND_CODE),this.formFields=[],this.handleSend=function(e){return n.send(e)},this.handleSubmit=function(e){return n.submit(e)},this.handleAuthStateChange=h.d,this.usernameAlias="username",this.delivery=null,this.loading=!1,this.phoneNumber={countryDialCodeValue:l.b,phoneNumberValue:null},this.newFormFields=[],this.forgotPasswordAttrs={userInput:"",password:"",code:""}}var t,n;return _createClass(e,[{key:"componentWillLoad",value:function(){Object(h.c)(this.usernameAlias),this.buildFormFields()}},{key:"formFieldsHandler",value:function(){this.buildFormFields()}},{key:"buildFormFields",value:function(){var e=this;0===this.formFields.length?this.buildDefaultFormFields():this.formFields.forEach((function(t){var n=Object.assign({},t);n.handleInputChange=function(n){return e.handleFormFieldInputWithCallback(n,t)},e.newFormFields.push(n)}))}},{key:"buildDefaultFormFields",value:function(){switch(this.usernameAlias){case"email":this.newFormFields=[{type:"email",required:!0,handleInputChange:this.handleFormFieldInputChange("email"),inputProps:{"data-test":"forgot-password-email-input"}}];break;case"phone_number":this.newFormFields=[{type:"phone_number",required:!0,handleInputChange:this.handleFormFieldInputChange("phone_number"),inputProps:{"data-test":"forgot-password-phone-number-input"}}];break;case"username":default:this.newFormFields=[{type:"username",required:!0,handleInputChange:this.handleFormFieldInputChange("username"),inputProps:{"data-test":"forgot-password-username-input"}}]}}},{key:"handleFormFieldInputChange",value:function(e){var t=this;switch(e){case"username":case"email":return function(e){return t.forgotPasswordAttrs.userInput=e.target.value};case"phone_number":return function(e){return t.handlePhoneNumberChange(e)};case"password":case"code":return function(n){return t.forgotPasswordAttrs[e]=n.target.value};default:return}}},{key:"handleFormFieldInputWithCallback",value:function(e,t){(t.handleInputChange?t.handleInputChange:function(e,t){t(e)})(e,this.handleFormFieldInputChange(t.type).bind(this))}},{key:"handlePhoneNumberChange",value:function(e){var t=e.target.name,n=e.target.value;t===l.n&&(this.phoneNumber.countryDialCodeValue=n),t===l.o&&(this.phoneNumber.phoneNumberValue=n)}},{key:"send",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.preventDefault(),c.a&&"function"==typeof c.a.forgotPassword){e.next=2;break}throw new Error(l.d);case 2:switch(this.loading=!0,this.usernameAlias){case"phone_number":this.forgotPasswordAttrs.userInput=Object(h.b)(this.phoneNumber)}return e.prev=3,e.next=6,c.a.forgotPassword(this.forgotPasswordAttrs.userInput);case 6:n=e.sent,p.debug(n),this.newFormFields=[{type:"code",required:!0,handleInputChange:this.handleFormFieldInputChange("code"),inputProps:{"data-test":"forgot-password-code-input"}},{type:"password",required:!0,handleInputChange:this.handleFormFieldInputChange("password"),label:r.a.get(u.a.NEW_PASSWORD_LABEL),placeholder:r.a.get(u.a.NEW_PASSWORD_PLACEHOLDER)}],this.delivery=n.CodeDeliveryDetails,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),Object(h.a)(e.t0);case 13:return e.prev=13,this.loading=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,this,[[3,10,13,16]])}))),function(e){return n.apply(this,arguments)})},{key:"submit",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,a,r,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.preventDefault(),c.a&&"function"==typeof c.a.forgotPasswordSubmit){e.next=2;break}throw new Error(l.d);case 2:return this.loading=!0,e.prev=3,n=this.forgotPasswordAttrs,a=n.userInput,r=n.code,i=n.password,e.next=10,c.a.forgotPasswordSubmit(a,r,i);case 10:s=e.sent,p.debug(s),this.handleAuthStateChange(o.a.SignIn),this.delivery=null,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),Object(h.a)(e.t0);case 17:return e.prev=17,this.loading=!1,e.finish(17);case 20:case"end":return e.stop()}}),e,this,[[3,14,17,20]])}))),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.delivery?function(t){return e.handleSubmit(t)}:function(t){return e.handleSend(t)};return Object(a.f)("amplify-form-section",{headerText:this.headerText,handleSubmit:t,loading:this.loading,secondaryFooterContent:Object(a.f)("amplify-button",{variant:"anchor",onClick:function(){return e.handleAuthStateChange(o.a.SignIn)},"data-test":"forgot-password-back-to-sign-in-link"},r.a.get(u.a.BACK_TO_SIGN_IN)),testDataPrefix:"forgot-password",submitButtonText:r.a.get(u.a.SEND_CODE)},Object(a.f)("amplify-auth-fields",{formFields:this.newFormFields}))}}],[{key:"watchers",get:function(){return{formFields:["formFieldsHandler"]}}}]),e}(),g=new s.a("amplify-require-new-password"),b=function(){function e(t){var n=this;_classCallCheck(this,e),Object(a.g)(this,t),this.headerText=r.a.get(u.a.CHANGE_PASSWORD),this.submitButtonText=r.a.get(u.a.CHANGE_PASSWORD_ACTION),this.handleSubmit=function(e){return n.completeNewPassword(e)},this.handleAuthStateChange=h.d,this.formFields=[{type:o.e.Password,required:!0,handleInputChange:function(e){return n.handlePasswordChange(e)},label:r.a.get(u.a.NEW_PASSWORD_LABEL),placeholder:r.a.get(u.a.NEW_PASSWORD_PLACEHOLDER)}],this.loading=!1,this.requiredAttributes={},this.newFormFields=this.formFields}var t,n;return _createClass(e,[{key:"handleRequiredAttributeInputChange",value:function(e,t){this.requiredAttributes[e]=t.target.value}},{key:"componentWillLoad",value:function(){var e=this;this.user&&this.user.challengeParam.requiredAttributes&&this.user.challengeParam.requiredAttributes.forEach((function(t){e.newFormFields.push({type:t,required:!0,label:h.g[t].label,placeholder:h.g[t].placeholder,handleInputChange:function(n){return e.handleRequiredAttributeInputChange(t,n)}})}))}},{key:"handlePasswordChange",value:function(e){this.password=e.target.value}},{key:"checkContact",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.a&&"function"==typeof c.a.verifiedContact){e.next=2;break}throw new Error(l.d);case 2:return e.prev=2,e.next=5,c.a.verifiedContact(t);case 5:n=e.sent,Object(i.c)(n.verified)?(t=Object.assign(t,n),this.handleAuthStateChange(o.a.VerifyContact,t)):this.handleAuthStateChange(o.a.SignedIn,t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),Object(h.a)(e.t0);case 12:case"end":return e.stop()}}),e,this,[[2,9]])}))),function(e){return n.apply(this,arguments)})},{key:"completeNewPassword",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.preventDefault(),c.a&&"function"==typeof c.a.completeNewPassword){e.next=2;break}throw new Error(l.d);case 2:return this.loading=!0,e.prev=3,e.next=6,c.a.completeNewPassword(this.user,this.password,this.requiredAttributes);case 6:n=e.sent,e.t0=(g.debug("complete new password",n),n.challengeName),e.next=e.t0===o.b.SMSMFA?10:e.t0===o.b.MFASetup?12:14;break;case 10:return this.handleAuthStateChange(o.a.ConfirmSignIn,n),e.abrupt("break",15);case 12:return g.debug("TOTP setup",n.challengeParam),this.handleAuthStateChange(o.a.TOTPSetup,n),e.abrupt("break",15);case 14:this.checkContact(n);case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(3),Object(h.a)(e.t1);case 20:return e.prev=20,this.loading=!1,e.finish(20);case 23:case"end":return e.stop()}}),e,this,[[3,17,20,23]])}))),function(e){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;return Object(a.f)("amplify-form-section",{headerText:this.headerText,handleSubmit:this.handleSubmit,loading:this.loading,secondaryFooterContent:Object(a.f)("amplify-button",{variant:"anchor",onClick:function(){return e.handleAuthStateChange(o.a.SignIn)}},r.a.get(u.a.BACK_TO_SIGN_IN))},Object(a.f)("amplify-auth-fields",{formFields:this.newFormFields}))}}]),e}(),v=new s.a("SignIn"),y=function(){function e(t){var n=this;_classCallCheck(this,e),Object(a.g)(this,t),this.handleSubmit=function(e){return n.signIn(e)},this.headerText=r.a.get(u.a.SIGN_IN_HEADER_TEXT),this.submitButtonText=r.a.get(u.a.SIGN_IN_ACTION),this.handleAuthStateChange=h.d,this.usernameAlias="username",this.formFields=[],this.newFormFields=[],this.loading=!1,this.phoneNumber={countryDialCodeValue:l.b,phoneNumberValue:null},this.signInAttributes={userInput:"",password:""}}var t;return _createClass(e,[{key:"handleFormFieldInputChange",value:function(e){var t=this;switch(e){case"username":case"email":return function(e){return t.signInAttributes.userInput=e.target.value};case"phone_number":return function(e){return t.handlePhoneNumberChange(e)};case"password":return function(e){return t.signInAttributes.password=e.target.value}}}},{key:"handleFormFieldInputWithCallback",value:function(e,t){(t.handleInputChange?t.handleInputChange:function(e,t){t(e)})(e,this.handleFormFieldInputChange(t.type).bind(this))}},{key:"handlePhoneNumberChange",value:function(e){var t=e.target.name,n=e.target.value;t===l.n&&(this.phoneNumber.countryDialCodeValue=n),t===l.o&&(this.phoneNumber.phoneNumberValue=n)}},{key:"checkContact",value:function(e){var t=this;if(!c.a||"function"!=typeof c.a.verifiedContact)throw new Error(l.d);c.a.verifiedContact(e).then((function(n){Object(i.c)(n.verified)?(e=Object.assign(e,n),t.handleAuthStateChange(o.a.VerifyContact,e)):t.handleAuthStateChange(o.a.SignedIn,e)}))}},{key:"signIn",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.preventDefault(),c.a&&"function"==typeof c.a.signIn){e.next=2;break}throw new Error(l.d);case 2:switch(this.loading=!0,this.usernameAlias){case"phone_number":this.signInAttributes.userInput=Object(h.b)(this.phoneNumber)}return e.prev=3,e.next=6,c.a.signIn(this.signInAttributes.userInput,this.signInAttributes.password);case 6:n=e.sent,v.debug(n),n.challengeName===o.b.SMSMFA||n.challengeName===o.b.SoftwareTokenMFA?(v.debug("confirm user with "+n.challengeName),this.handleAuthStateChange(o.a.ConfirmSignIn,n)):n.challengeName===o.b.NewPasswordRequired?(v.debug("require new password",n.challengeParam),this.handleAuthStateChange(o.a.ResetPassword,n)):n.challengeName===o.b.MFASetup?(v.debug("TOTP setup",n.challengeParam),this.handleAuthStateChange(o.a.TOTPSetup,n)):n.challengeName===o.b.CustomChallenge&&n.challengeParam&&"true"===n.challengeParam.trigger?(v.debug("custom challenge",n.challengeParam),this.handleAuthStateChange(o.a.CustomConfirmSignIn,n)):this.checkContact(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),Object(h.a)(e.t0),"UserNotConfirmedException"===e.t0.code?(v.debug("the user is not confirmed"),this.handleAuthStateChange(o.a.ConfirmSignUp,{username:this.signInAttributes.userInput})):"PasswordResetRequiredException"===e.t0.code&&(v.debug("the user requires a new password"),this.handleAuthStateChange(o.a.ForgotPassword,{username:this.signInAttributes.userInput}));case 13:return e.prev=13,this.loading=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,this,[[3,10,13,16]])}))),function(e){return t.apply(this,arguments)})},{key:"buildDefaultFormFields",value:function(){var e=this,t=[];switch(this.usernameAlias){case"email":t.push({type:"email",required:!0,handleInputChange:this.handleFormFieldInputChange("email"),inputProps:{"data-test":"sign-in-email-input"}});break;case"phone_number":t.push({type:"phone_number",required:!0,handleInputChange:this.handleFormFieldInputChange("phone_number"),inputProps:{"data-test":"sign-in-phone-number-input"}});break;case"username":default:t.push({type:"username",required:!0,handleInputChange:this.handleFormFieldInputChange("username"),inputProps:{"data-test":"sign-in-username-input"}})}t.push({type:"password",hint:Object(a.f)("div",null,r.a.get(u.a.FORGOT_PASSWORD_TEXT)," ",Object(a.f)("amplify-button",{variant:"anchor",onClick:function(){return e.handleAuthStateChange(o.a.ForgotPassword)},"data-test":"sign-in-forgot-password-link"},r.a.get(u.a.RESET_PASSWORD_TEXT))),required:!0,handleInputChange:this.handleFormFieldInputChange("password"),inputProps:{"data-test":"sign-in-password-input"}}),this.newFormFields=[].concat(t)}},{key:"buildFormFields",value:function(){var e=this;if(0===this.formFields.length)this.buildDefaultFormFields();else{var t=[];this.formFields.forEach((function(n){var i=Object.assign({},n);"password"===i.type&&(i.hint=Object(h.f)(i)?Object(a.f)("div",null,r.a.get(u.a.FORGOT_PASSWORD_TEXT)," ",Object(a.f)("amplify-button",{variant:"anchor",onClick:function(){return e.handleAuthStateChange(o.a.ForgotPassword)},"data-test":"sign-in-forgot-password-link"},r.a.get(u.a.RESET_PASSWORD_TEXT))):i.hint),i.handleInputChange=function(t){return e.handleFormFieldInputWithCallback(t,n)},t.push(i)})),this.newFormFields=t}}},{key:"componentWillLoad",value:function(){Object(h.c)(this.usernameAlias),this.buildFormFields()}},{key:"formFieldsHandler",value:function(){this.buildFormFields()}},{key:"render",value:function(){var e=this;return Object(a.f)("amplify-form-section",{headerText:this.headerText,handleSubmit:this.handleSubmit,testDataPrefix:"sign-in"},Object(a.f)("amplify-federated-buttons",{handleAuthStateChange:this.handleAuthStateChange,federated:this.federated}),!Object(i.c)(this.federated)&&Object(a.f)("amplify-strike",null,"or"),Object(a.f)("amplify-auth-fields",{formFields:this.newFormFields}),Object(a.f)("div",{slot:"amplify-form-section-footer",class:"sign-in-form-footer"},Object(a.f)("slot",{name:"footer"},Object(a.f)("slot",{name:"secondary-footer-content"},Object(a.f)("span",null,r.a.get(u.a.NO_ACCOUNT_TEXT)," ",Object(a.f)("amplify-button",{variant:"anchor",onClick:function(){return e.handleAuthStateChange(o.a.SignUp)},"data-test":"sign-in-create-account-link"},r.a.get(u.a.CREATE_ACCOUNT_TEXT)))),Object(a.f)("slot",{name:"primary-footer-content"},Object(a.f)("amplify-button",{type:"submit",disabled:this.loading,"data-test":"sign-in-sign-in-button"},Object(a.f)("amplify-loading-spinner",{style:{display:this.loading?"initial":"none"}}),Object(a.f)("span",{style:{display:this.loading?"none":"initial"}},this.submitButtonText))))))}}],[{key:"watchers",get:function(){return{formFields:["formFieldsHandler"]}}}]),e}();y.style=":host{--footer-size:var(--amplify-text-sm);--footer-color:var(--amplify-grey);--footer-font-family:var(--amplify-font-family)}.sign-in-form-footer{font-family:var(--footer-font-family);font-weight:300;font-size:var(--footer-size);color:var(--footer-color);margin-bottom:10px;display:-ms-flexbox;display:flex;-ms-flex-direction:column-reverse;flex-direction:column-reverse;-ms-flex-align:center;align-items:center;-ms-flex-pack:distribute;justify-content:space-around}@media (min-width: 672px){.sign-in-form-footer{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:baseline;align-items:baseline}}.sign-in-form-footer *+*{margin-bottom:15px}";var C=function(){function e(t){var n=this;_classCallCheck(this,e),Object(a.g)(this,t),this.handleSubmit=function(e){return n.signUp(e)},this.headerText=r.a.get(u.a.SIGN_UP_HEADER_TEXT),this.submitButtonText=r.a.get(u.a.SIGN_UP_SUBMIT_BUTTON_TEXT),this.haveAccountText=r.a.get(u.a.SIGN_UP_HAVE_ACCOUNT_TEXT),this.signInText=r.a.get(u.a.SIGN_IN_TEXT),this.formFields=[],this.handleAuthStateChange=h.d,this.usernameAlias="username",this.newFormFields=[],this.phoneNumber={countryDialCodeValue:l.b,phoneNumberValue:null},this.loading=!1,this.signUpAttributes={username:"",password:"",attributes:{}}}var t;return _createClass(e,[{key:"handleFormFieldInputChange",value:function(e){var t=this;switch(e){case"username":return function(e){return t.signUpAttributes.username=e.target.value};case"password":return function(e){return t.signUpAttributes.password=e.target.value};case"email":return function(e){return t.signUpAttributes.attributes.email=e.target.value};case"phone_number":return function(e){return t.handlePhoneNumberChange(e)};default:return function(n){return t.signUpAttributes.attributes[e]=n.target.value}}}},{key:"handleFormFieldInputWithCallback",value:function(e,t){(t.handleInputChange?t.handleInputChange:function(e,t){t(e)})(e,this.handleFormFieldInputChange(t.type).bind(this))}},{key:"handlePhoneNumberChange",value:function(e){var t=e.target.name,n=e.target.value;t===l.n&&(this.phoneNumber.countryDialCodeValue=n),t===l.o&&(this.phoneNumber.phoneNumberValue=n)}},{key:"signUp",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.preventDefault(),c.a&&"function"==typeof c.a.signUp){e.next=2;break}throw new Error(l.d);case 2:switch(this.phoneNumber.phoneNumberValue&&(this.signUpAttributes.attributes.phone_number=Object(h.b)(this.phoneNumber)),this.usernameAlias){case"email":case"phone_number":this.signUpAttributes.username=this.signUpAttributes.attributes[this.usernameAlias]}return e.prev=3,e.next=6,c.a.signUp(this.signUpAttributes);case 6:n=e.sent,this.handleAuthStateChange(o.a.ConfirmSignUp,Object.assign(Object.assign({},n.user),{signUpAttrs:this.signUpAttributes})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),Object(h.a)(e.t0);case 13:case"end":return e.stop()}}),e,this,[[3,10]])}))),function(e){return t.apply(this,arguments)})},{key:"buildDefaultFormFields",value:function(){switch(this.usernameAlias){case"email":this.newFormFields=[{type:"email",placeholder:r.a.get(u.a.SIGN_UP_EMAIL_PLACEHOLDER),required:!0,handleInputChange:this.handleFormFieldInputChange("email"),inputProps:{"data-test":"sign-up-email-input"}},{type:"password",placeholder:r.a.get(u.a.SIGN_UP_PASSWORD_PLACEHOLDER),required:!0,handleInputChange:this.handleFormFieldInputChange("password"),inputProps:{"data-test":"sign-up-password-input"}},{type:"phone_number",required:!0,handleInputChange:this.handleFormFieldInputChange("phone_number"),inputProps:{"data-test":"sign-up-phone-number-input"}}];break;case"phone_number":this.newFormFields=[{type:"phone_number",required:!0,handleInputChange:this.handleFormFieldInputChange("phone_number"),inputProps:{"data-test":"sign-up-phone-number-input"}},{type:"password",placeholder:r.a.get(u.a.SIGN_UP_PASSWORD_PLACEHOLDER),required:!0,handleInputChange:this.handleFormFieldInputChange("password"),inputProps:{"data-test":"sign-up-password-input"}},{type:"email",placeholder:r.a.get(u.a.SIGN_UP_EMAIL_PLACEHOLDER),required:!0,handleInputChange:this.handleFormFieldInputChange("email"),inputProps:{"data-test":"sign-up-email-input"}}];break;case"username":default:this.newFormFields=[{type:"username",placeholder:r.a.get(u.a.SIGN_UP_USERNAME_PLACEHOLDER),required:!0,handleInputChange:this.handleFormFieldInputChange("username"),inputProps:{"data-test":"sign-up-username-input"}},{type:"password",placeholder:r.a.get(u.a.SIGN_UP_PASSWORD_PLACEHOLDER),required:!0,handleInputChange:this.handleFormFieldInputChange("password"),inputProps:{"data-test":"sign-up-password-input"}},{type:"email",placeholder:r.a.get(u.a.SIGN_UP_EMAIL_PLACEHOLDER),required:!0,handleInputChange:this.handleFormFieldInputChange("email"),inputProps:{"data-test":"sign-up-email-input"}},{type:"phone_number",required:!0,handleInputChange:this.handleFormFieldInputChange("phone_number"),inputProps:{"data-test":"sign-up-phone-number-input"}}]}}},{key:"buildFormFields",value:function(){var e=this;if(0===this.formFields.length)this.buildDefaultFormFields();else{var t=[];this.formFields.forEach((function(n){var a=Object.assign({},n);a.handleInputChange=function(t){return e.handleFormFieldInputWithCallback(t,n)},t.push(a)})),this.newFormFields=t}}},{key:"componentWillLoad",value:function(){Object(h.c)(this.usernameAlias),this.buildFormFields()}},{key:"formFieldsHandler",value:function(){this.buildFormFields()}},{key:"render",value:function(){var e=this;return Object(a.f)("amplify-form-section",{headerText:this.headerText,handleSubmit:this.handleSubmit,testDataPrefix:"sign-up"},Object(a.f)("amplify-auth-fields",{formFields:this.newFormFields}),Object(a.f)("div",{class:"sign-up-form-footer",slot:"amplify-form-section-footer"},Object(a.f)("slot",{name:"footer"},Object(a.f)("slot",{name:"secondary-footer-content"},Object(a.f)("span",null,this.haveAccountText," ",Object(a.f)("amplify-button",{variant:"anchor",onClick:function(){return e.handleAuthStateChange(o.a.SignIn)},"data-test":"sign-up-sign-in-link"},this.signInText))),Object(a.f)("slot",{name:"primary-footer-content"},Object(a.f)("amplify-button",{type:"submit","data-test":"sign-up-create-account-button"},Object(a.f)("amplify-loading-spinner",{style:{display:this.loading?"initial":"none"}}),Object(a.f)("span",{style:{display:this.loading?"none":"initial"}},this.submitButtonText))))))}}],[{key:"watchers",get:function(){return{formFields:["formFieldsHandler"]}}}]),e}();C.style=":host{--footer-font-family:var(--amplify-font-family);--footer-font-size:var(--amplify-text-sm);--footer-color:var(--amplify-grey)}.sign-up-form-footer{font-family:var(--footer-font-family);font-weight:300;font-size:var(--footer-font-size);color:var(--footer-color);display:-ms-flexbox;display:flex;-ms-flex-direction:column-reverse;flex-direction:column-reverse;-ms-flex-align:center;align-items:center;-ms-flex-pack:distribute;justify-content:space-around}@media (min-width: 672px){.sign-up-form-footer{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:justify;justify-content:space-between;-ms-flex-align:baseline;align-items:baseline}}.sign-up-form-footer *+*{margin-bottom:15px}";var F=function(){function e(t){_classCallCheck(this,e),Object(a.g)(this,t),this.message=""}return _createClass(e,[{key:"render",value:function(){return Object(a.f)("div",{class:"toast"},Object(a.f)("amplify-icon",{class:"toast-icon",name:"warning"}),this.message?Object(a.f)("span",null,this.message):null,Object(a.f)("slot",null),Object(a.f)("button",{class:"toast-close",onClick:this.handleClose}))}}]),e}();F.style=':host{--background-color:var(--amplify-secondary-tint);--color:var(--amplify-white);--font-size:var(--amplify-text-sm);--font-family:var(--amplify-font-family);--close-icon-color:var(--amplify-white);--close-icon-hover:var(--amplify-red)}.toast-icon{padding-right:5px}.toast{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;position:absolute;top:0;left:0;width:100%;z-index:99;-webkit-box-shadow:0 0 5px 0 rgba(0, 0, 0, 0.3);box-shadow:0 0 5px 0 rgba(0, 0, 0, 0.3);padding:16px;background-color:var(--background-color);font-size:var(--font-size);color:var(--color);-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:5px;font-family:var(--font-family)}.toast>span{margin-right:10px}.toast-close{margin-left:auto;-ms-flex-item-align:center;align-self:center;position:relative;width:18px;height:18px;overflow:hidden;cursor:pointer;background:transparent;border:none}.toast-close::before,.toast-close::after{content:"";position:absolute;height:2px;width:100%;top:50%;left:0;margin-top:-1px;background:var(--close-icon-color)}.toast-close:hover::before,.toast-close:hover::after{background:var(--close-icon-hover)}.toast-close::before{-webkit-transform:rotate(45deg);-moz-transform:rotate(45deg);-ms-transform:rotate(45deg);-o-transform:rotate(45deg);transform:rotate(45deg)}.toast-close::after{-webkit-transform:rotate(-45deg);-moz-transform:rotate(-45deg);-ms-transform:rotate(-45deg);-o-transform:rotate(-45deg);transform:rotate(-45deg)}';var _=new s.a("AmplifyVerifyContact"),w=function(){function e(t){_classCallCheck(this,e),Object(a.g)(this,t),this.handleAuthStateChange=h.d,this.loading=!1}var t,n;return _createClass(e,[{key:"handleSubmit",value:function(e){e.preventDefault(),this.verifyAttr?this.submit(this.code):this.verify(this.contact)}},{key:"submit",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.verifyAttr,c.a&&"function"==typeof c.a.verifyCurrentUserAttributeSubmit){e.next=3;break}throw new Error(l.d);case 3:return this.loading=!0,e.prev=4,e.next=7,c.a.verifyCurrentUserAttributeSubmit(n,t);case 7:a=e.sent,_.debug(a),this.handleAuthStateChange(o.a.SignedIn,this.user),this.verifyAttr=null,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),Object(h.a)(e.t0),_.error(e.t0);case 14:return e.prev=14,this.loading=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[4,11,14,17]])}))),function(e){return n.apply(this,arguments)})},{key:"verify",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=19;break}if(c.a&&"function"==typeof c.a.verifyCurrentUserAttribute){e.next=3;break}throw new Error(l.d);case 3:return this.loading=!0,e.prev=4,e.next=7,c.a.verifyCurrentUserAttribute(t);case 7:n=e.sent,_.debug(n),this.verifyAttr=t,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),Object(h.a)(e.t0),_.error(e.t0);case 14:return e.prev=14,this.loading=!1,e.finish(14);case 17:e.next=20;break;case 19:_.error("Neither Email nor Phone Number selected");case 20:case"end":return e.stop()}}),e,this,[[4,11,14,17]])}))),function(e){return t.apply(this,arguments)})},{key:"handleInputChange",value:function(e){var t=e.target.name;"code"===t?this.code=e.target.value:"contact"===t&&(this.contact=e.target.value)}},{key:"renderSubmit",value:function(){var e=this;return Object(a.f)("div",null,Object(a.f)("amplify-input",{inputProps:{autocomplete:"off"},name:"code",placeholder:r.a.get(u.a.CODE_PLACEHOLDER),handleInputChange:function(t){return e.handleInputChange(t)}}))}},{key:"renderVerify",value:function(){var e=this,t=this.user;if(!t)return _.debug("No user to verify"),null;var n=t.unverified;if(!n)return _.debug("Unverified variable does not exist on user"),null;var i=n.email,s=n.phone_number;return Object(a.f)("div",null,i&&Object(a.f)("amplify-radio-button",{label:r.a.get(u.a.VERIFY_CONTACT_EMAIL_LABEL),key:"email",name:"contact",value:"email",handleInputChange:function(t){return e.handleInputChange(t)}}),s&&Object(a.f)("amplify-radio-button",{label:r.a.get(u.a.VERIFY_CONTACT_PHONE_LABEL),key:"phone_number",name:"contact",value:"phone_number",handleInputChange:function(t){return e.handleInputChange(t)}}))}},{key:"render",value:function(){var e=this;return Object(a.f)("amplify-form-section",{handleSubmit:function(t){return e.handleSubmit(t)},headerText:r.a.get(u.a.VERIFY_CONTACT_HEADER_TEXT),loading:this.loading,secondaryFooterContent:Object(a.f)("span",null,Object(a.f)("amplify-button",{variant:"anchor",onClick:function(){return e.handleAuthStateChange(o.a.SignedIn,e.user)}},"Skip")),submitButtonText:r.a.get(this.verifyAttr?u.a.VERIFY_CONTACT_SUBMIT_LABEL:u.a.VERIFY_CONTACT_VERIFY_LABEL)},this.verifyAttr?this.renderSubmit():this.renderVerify())}}]),e}()}}]);